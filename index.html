<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tr√≤ Ch∆°i L·∫≠t Th·∫ª Nh·ªõ</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            user-select: none; /* NgƒÉn b√¥i ƒëen vƒÉn b·∫£n khi tr·∫ª b·∫•m li√™n t·ª•c */
        }

        body {
            background-color: #fdf2e9; /* M√†u n·ªÅn nh·∫π nh√†ng */
            background-image: url('https://www.transparenttextures.com/patterns/notebook.png'); /* H·ªça ti·∫øt gi·∫•y v·ªü t√πy ch·ªçn */
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 10px;
        }

        /* --- 1. ƒê·ªíNG H·ªí & TI√äU ƒê·ªÄ --- */
        .header {
            text-align: center;
            margin-bottom: 10px;
            width: 100%;
        }

        .timer-box {
            background: #fff;
            padding: 10px 20px;
            border-radius: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            font-size: 1.5rem;
            font-weight: bold;
            color: #d35400;
            display: inline-block;
            border: 2px solid #e67e22;
        }

        /* --- 2. KHUNG TR√í CH∆†I (B·ªê C·ª§C 3-2-3-2) --- */
        .game-board {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px; /* Kho·∫£ng c√°ch gi·ªØa c√°c h√†ng */
            width: 100%;
            max-width: 500px;
        }

        .row {
            display: flex;
            justify-content: center;
            gap: 15px; /* Kho·∫£ng c√°ch gi·ªØa c√°c th·∫ª */
            width: 100%;
        }

        /* --- TH·∫∫ B√ÄI --- */
        .card {
            width: 80px;
            height: 110px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            cursor: pointer;
        }

        /* Hi·ªáu ·ª©ng l·∫≠t */
        .card.flip {
            transform: rotateY(180deg);
        }

        /* M·∫∑t tr∆∞·ªõc v√† sau c·ªßa th·∫ª */
        .front-face, .back-face {
            width: 100%;
            height: 100%;
            position: absolute;
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            backface-visibility: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            border: 3px solid #5d4037; /* Vi·ªÅn n√¢u gi·ªëng h√¨nh */
        }

        /* M·∫∑t ƒëang √∫p (Hi·ªÉn th·ªã s·ªë 1-10) */
        .front-face {
            background-color: #a1887f; /* M√†u n√¢u nh·∫°t gi·ªëng h√¨nh */
            font-size: 2.5rem;
            font-weight: bold;
            color: #3e2723;
        }

        /* M·∫∑t ƒë√£ l·∫≠t (Hi·ªÉn th·ªã h√¨nh ·∫£nh/icon) */
        .back-face {
            background-color: #fff;
            transform: rotateY(180deg);
            font-size: 3rem; /* K√≠ch th∆∞·ªõc icon b√™n trong */
        }

        /* --- 3. N√öT ƒêI·ªÄU KHI·ªÇN (L·ªöN H∆†N) --- */
        .controls {
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 400px;
            padding: 0 20px;
        }

        .btn {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 15px 30px; /* TƒÉng k√≠ch th∆∞·ªõc n√∫t */
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px #1e8449;
            transition: active 0.1s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 #1e8449;
        }

        .btn-replay {
            background-color: #e67e22;
            box-shadow: 0 4px #d35400;
        }
        
        .btn-replay:active {
            box-shadow: 0 0 #d35400;
        }

        /* --- MODAL TH√îNG B√ÅO --- */
        .modal {
            display: none; /* M·∫∑c ƒë·ªãnh ·∫©n */
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            animation: popIn 0.3s ease-out;
            width: 80%;
            max-width: 400px;
        }

        .modal h2 {
            color: #27ae60;
            margin-bottom: 15px;
        }

        .modal p {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        @keyframes popIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* Responsive cho ƒëi·ªán tho·∫°i nh·ªè */
        @media (max-width: 360px) {
            .card { width: 70px; height: 95px; }
            .front-face { font-size: 2rem; }
        }
    </style>
</head>
<body>

    <div class="header">
        <div class="timer-box">
            ‚è±Ô∏è <span id="timer">00:00</span>
        </div>
    </div>

    <div class="game-board" id="gameBoard">
        <div class="row" id="row1"></div>
        <div class="row" id="row2"></div>
        <div class="row" id="row3"></div>
        <div class="row" id="row4"></div>
    </div>

    <div class="controls">
        <button class="btn" onclick="playAudioHint()">
            üîä Nghe
        </button>
        
        <button class="btn btn-replay" onclick="resetGame()">
            üîÑ Ch∆°i l·∫°i
        </button>
    </div>

    <div class="modal" id="winModal">
        <div class="modal-content">
            <h2>üéâ Ch√∫c m·ª´ng b√©! üéâ</h2>
            <p id="resultMessage">B√© ƒë√£ ho√†n th√†nh trong...</p>
            <button class="btn btn-replay" style="width:100%; justify-content:center;" onclick="resetGame()">Ch∆°i l·∫°i ngay</button>
        </div>
    </div>

    <script>
        // D·ªØ li·ªáu h√¨nh ·∫£nh (D√πng Emoji cho ƒë∆°n gi·∫£n, b·∫°n c√≥ th·ªÉ thay b·∫±ng th·∫ª <img>)
        // T·ªïng c·ªông 5 c·∫∑p h√¨nh cho 10 th·∫ª
        const items = ['üçé', 'üçé', 'üê∂', 'üê∂', 'üöó', 'üöó', '‚≠ê', '‚≠ê', 'üéà', 'üéà'];
        
        let shuffledItems = [];
        let hasFlippedCard = false;
        let lockBoard = false;
        let firstCard, secondCard;
        let matchesFound = 0;
        
        // Bi·∫øn ƒë·ªìng h·ªì
        let timerSeconds = 0;
        let timerInterval = null;
        let isGameActive = false;

        const timerDisplay = document.getElementById('timer');
        const winModal = document.getElementById('winModal');
        const resultMessage = document.getElementById('resultMessage');

        // Kh·ªüi t·∫°o game khi t·∫£i trang
        document.addEventListener('DOMContentLoaded', () => {
            initGame();
        });

        function initGame() {
            // 4. ƒê·∫£o th·ª© t·ª± th·∫ª m·ªói l·∫ßn ch∆°i
            shuffledItems = shuffleArray([...items]); 
            createCards();
            startTimer();
        }

        // H√†m tr·ªôn m·∫£ng ng·∫´u nhi√™n (Fisher-Yates)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function createCards() {
            // X√≥a th·∫ª c≈©
            ['row1', 'row2', 'row3', 'row4'].forEach(id => document.getElementById(id).innerHTML = '');

            // Reset bi·∫øn
            matchesFound = 0;
            [hasFlippedCard, lockBoard] = [false, false];
            [firstCard, secondCard] = [null, null];
            
            // T·∫°o 10 th·∫ª chia v√†o 4 h√†ng
            // Row 1: Th·∫ª 0, 1, 2 (S·ªë hi·ªÉn th·ªã 1, 2, 3)
            // Row 2: Th·∫ª 3, 4 (S·ªë hi·ªÉn th·ªã 4, 5)
            // Row 3: Th·∫ª 5, 6, 7 (S·ªë hi·ªÉn th·ªã 6, 7, 8)
            // Row 4: Th·∫ª 8, 9 (S·ªë hi·ªÉn th·ªã 9, 10)
            
            let cardIndex = 0;
            const rowsStructure = [3, 2, 3, 2]; // S·ªë l∆∞·ª£ng th·∫ª m·ªói h√†ng
            const rowIds = ['row1', 'row2', 'row3', 'row4'];

            rowsStructure.forEach((count, rowIndex) => {
                const rowElement = document.getElementById(rowIds[rowIndex]);
                
                for (let i = 0; i < count; i++) {
                    const itemValue = shuffledItems[cardIndex];
                    const cardNumber = cardIndex + 1; // 2. ƒê√°nh s·ªë 1-10

                    const card = document.createElement('div');
                    card.classList.add('card');
                    card.dataset.name = itemValue;

                    // HTML cho th·∫ª: M·∫∑t sau (Icon) v√† M·∫∑t tr∆∞·ªõc (S·ªë)
                    // L∆∞u √Ω: CSS .front-face l√† c√°i nh√¨n th·∫•y ban ƒë·∫ßu (s·ªë), .back-face l√† c√°i b·ªã ·∫©n (h√¨nh)
                    card.innerHTML = `
                        <div class="back-face">${itemValue}</div>
                        <div class="front-face">${cardNumber}</div>
                    `;

                    card.addEventListener('click', flipCard);
                    rowElement.appendChild(card);
                    
                    cardIndex++;
                }
            });
        }

        function flipCard() {
            if (lockBoard) return;
            if (this === firstCard) return;

            // B·∫Øt ƒë·∫ßu t√≠nh gi·ªù khi b·∫•m th·∫ª ƒë·∫ßu ti√™n n·∫øu ch∆∞a ch·∫°y
            if (!isGameActive) {
                isGameActive = true;
            }

            this.classList.add('flip');

            if (!hasFlippedCard) {
                // L·∫ßn b·∫•m th·ª© nh·∫•t
                hasFlippedCard = true;
                firstCard = this;
                return;
            }

            // L·∫ßn b·∫•m th·ª© hai
            secondCard = this;
            checkForMatch();
        }

        function checkForMatch() {
            let isMatch = firstCard.dataset.name === secondCard.dataset.name;

            isMatch ? disableCards() : unflipCards();
        }

        function disableCards() {
            // Kh√≥a th·∫ª ƒë√∫ng
            firstCard.removeEventListener('click', flipCard);
            secondCard.removeEventListener('click', flipCard);
            
            // ƒê·∫∑t m√†u n·ªÅn kh√°c ƒë·ªÉ bi·∫øt ƒë√£ ƒë√∫ng (t√πy ch·ªçn)
            firstCard.querySelector('.back-face').style.backgroundColor = '#d4efdf';
            secondCard.querySelector('.back-face').style.backgroundColor = '#d4efdf';

            resetBoard();
            matchesFound++;

            // Ki·ªÉm tra chi·∫øn th·∫Øng (5 c·∫∑p)
            if (matchesFound === 5) {
                endGame();
            }
        }

        function unflipCards() {
            lockBoard = true;
            setTimeout(() => {
                firstCard.classList.remove('flip');
                secondCard.classList.remove('flip');
                resetBoard();
            }, 1000); // ƒê·ª£i 1 gi√¢y r·ªìi √∫p l·∫°i
        }

        function resetBoard() {
            [hasFlippedCard, lockBoard] = [false, false];
            [firstCard, secondCard] = [null, null];
        }

        // --- ƒê·ªíNG H·ªí & GAME LOGIC ---

        function startTimer() {
            stopTimer(); // Reset n·∫øu ƒëang ch·∫°y
            timerSeconds = 0;
            isGameActive = true;
            timerDisplay.innerText = "00:00";
            
            timerInterval = setInterval(() => {
                timerSeconds++;
                const minutes = Math.floor(timerSeconds / 60);
                const seconds = timerSeconds % 60;
                timerDisplay.innerText = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timerInterval);
            isGameActive = false;
        }

        function endGame() {
            stopTimer();
            const finalTime = timerDisplay.innerText;
            // 5. Hi·ªán th√¥ng b√°o ho√†n th√†nh
            resultMessage.innerText = `B√© ƒë√£ ho√†n th√†nh tr√≤ ch∆°i trong th·ªùi gian: ${finalTime}`;
            winModal.style.display = 'flex';
        }

        function resetGame() {
            winModal.style.display = 'none';
            initGame();
        }

        function playAudioHint() {
            // ƒê√¢y l√† n∆°i b·∫°n th√™m m√£ ƒë·ªÉ ph√°t √¢m thanh
            // V√≠ d·ª•: ƒê·ªçc to s·ªë c·ªßa th·∫ª ƒëang ch·ªù ho·∫∑c h∆∞·ªõng d·∫´n
            alert("Ch·ª©c nƒÉng √¢m thanh: B·∫°n c√≥ th·ªÉ th√™m file mp3 v√†o ƒë√¢y!");
        }

    </script>
</body>
</html>
